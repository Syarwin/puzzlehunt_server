{% extends "base.html" %}
{% block title %}Puzzle - {{ puzzle.puzzle_name }}{% endblock title %}

{% block includes %}
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/ws4redis.js"></script>
{% endblock includes %}

{% block content %}
<div class='puzzle'>
  <div class='info'>
    <h1><a href='{{ puzzle.link }}'>
      P{{ puzzle.puzzle_number}} - {{ puzzle.puzzle_name }}
    </a></h1>
    <a href='/'>Go back to all puzzles</a>
  </div>

  <fieldset id='submit'>
    <legend>Submit an answer</legend>
    <form action="/puzzle/{{ puzzle.puzzle_id }}/" method='post'>
      {% csrf_token %}
      <div>
	{{ form }}
        <input type='submit' value='Submit' data-disable-with='Submitting...'/>
      </div>
    </form>
  </fieldset>
  <fieldset id='answers'>
    <legend>Past answers (automatically updated)</legend>
    <table>
      <thead>
        <tr>
          <th>Time</th>
          <th>Answer</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        {% for submission in submission_list reversed%}
	<tr data-id='table_row{{ forloop.counter0 }}'>
	    <td>{{ submission.submission_time|time:"h:i a" }}</td>
	      <td>{{ submission.submission_text }} </td>
	        <td>{{ submission.response_text }}</td>
		</tr>
	{% endfor %}
      </tbody>
    </table>
  </fieldset>
</div>
{% endblock content %}
