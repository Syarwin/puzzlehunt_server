<div id="sidebar" class="vertical-nav active">
  <div id="sidebar-collapse">
    <i class="bi bi-puzzle"></i>
  </div>

  <h2><a href="{% url 'huntserver:hunt' hunt.hunt_number %}">{{ hunt.hunt_name }}</a></h2>


  {% for episode in episodes %}
    <h3 class="episode-header">
      <a class="collapsed" data-bs-toggle="collapse" href="#collapse-episode-{{ episode.ep_number }}" role="button" aria-expanded="false" aria-controls="collapseExample">
      {{ episode.ep_name }}
      </a>
    </h3>
    <div id="collapse-episode-{{ episode.ep_number }}" class="collapse list-group flex-column mb-0">
      {% for cpuzzle in episode.puzzle_set.all %}
          {% if cpuzzle in puzzles %}
          <a href="{% url 'huntserver:puzzle' puzzle_id=cpuzzle.puzzle_id %}" class="list-group-item {% if puzzle and cpuzzle == puzzle %} active {% endif %}">
            {{ cpuzzle.puzzle_name }}
          </a>
          {% endif %}
      {% endfor %}
    </div>
  {% endfor %}
</div>

<script type="text/javascript">
$(function() {
  // Sidebar toggle behavior
  $('#sidebar-collapse').on('click', function() {
    $('#sidebar').toggleClass('active');
  });

  $('#sidebar .list-group-item.active').parent().show()
});
</script>
