# An apache configuration file meant to be paired with puzzlehunt_setup.sh
# Meant for quick vagrant base developement. Does not do shibboleth or ssl.

NameVirtualHost *:80
<VirtualHost *:80>
	ServerAdmin webmaster@localhost
	DocumentRoot /var/www/html

	<Directory /home/vagrant/puzzlehunt_server/puzzlehunt_server>
	    <Files wsgi.py>	
	        Require all granted
	    </Files>
	</Directory>

	Alias /static /home/vagrant/puzzlehunt_server/static
	<Directory /home/vagrant/puzzlehunt_server/static>
	    Require all granted
	</Directory>

	Alias /media /home/vagrant/puzzlehunt_server/media
	XSendFile	On
	XSendFilePath	/home/vagrant/puzzlehunt_server/media
    	<Directory /home/vagrant/puzzlehunt_server/media>
              Require all granted
    	</Directory>
    	<Directory /home/vagrant/puzzlehunt_server/media/puzzles>
              Require all denied
    	</Directory>

	ProxyPass	 /static/ !
	ProxyPass	 /media/ !

	WSGIDaemonProcess puzzlehunt_server python-path=/home/vagrant/puzzlehunt_server:/home/vagrant/puzzlehunt_server/venv/lib/python2.7/site-packages
	WSGIProcessGroup puzzlehunt_server
	WSGIScriptAlias / /home/vagrant/puzzlehunt_server/puzzlehunt_server/wsgi.py

</VirtualHost>
